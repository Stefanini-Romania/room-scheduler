
<div class="container h-100" style="padding-top: 80px">
        <div class="row">
            <room-selector (roomChange)="onRoomChanged($event)"></room-selector>
            &nbsp;
            <div class="btn-group" ngbRadioGroup>
                <label ngbButtonLabel class="btn-primary"(click)="goBack()">
                    <input ngbButton type="radio"><i class="fa fa-arrow-left"></i>
                </label>
                <label ngbButtonLabel class="btn-primary" (click)="goToToday()">
                    <input ngbButton type="radio">{{ 'calendar.today' |translate }}
                </label>
                <label ngbButtonLabel class="btn-primary" (click)="goForward()">
                    <input ngbButton type="radio"><i class="fa fa-arrow-right"></i>
                </label>
            </div>
            &nbsp;
            <div class="btn-group" ngbRadioGroup [ngModel]="view">
                <label ngbButtonLabel class="btn btn-primary" (click)="setView('dayView')">
                    <input ngbButton type="radio" value="dayView">{{'calendar.day' |translate}}
                </label>
                <label ngbButtonLabel class="btn-primary" (click)="setView('weekView')">
                    <input ngbButton type="radio" value="weekView">{{'calendar.week' |translate}}
                </label>
                
            </div>
            <label *ngIf="startDate && endDate" class="px-2">
                <b>{{ startDate | date: 'fullDate' }}</b>
                <b *ngIf="view == 'weekView'"> - {{ endDate | date: 'fullDate'}}</b>
            </label>

            <!--<button ngbButtonLabel ngbButton class="btn btn-primary" (click)="test($event, content)">Refresh</button>-->
        </div>
    
        <div class="row h-75 mby-5">
            <jqxScheduler #schedulerReference
                          [width]="1000" [height]="'100%'"
                          [date]="date"
                          [source]="dataAdapter"
                          [showLegend]="true"
                          [view]="view"
                          [views]="views"
                          [appointmentDataFields]="eventDataFields"
                          [resources]="resources"
                          [localization]="localization"
                          [showToolbar]="false"
                          [editDialog]="false"
                
                          (onContextMenuItemClick)="onContextMenuItemClick($event, content)"

                          (onDateChange)="showCalendarsDate($event)"
                          (onAppointmentClick)="false"
                          (onCellDoubleClick)="showCreateDialog($event, content) "
                          [renderAppointment]="renderAppointment"   
            ></jqxScheduler>
        </div>
    </div>
    
    
<!-- MODAL FORM -->
<ng-template #content let-c="close" let-d="dismiss" size-type="lg">
    <div class="modal-header" >
        <h6 class="modal-title">{{ saveEventTitle | translate }}</h6>
    </div>

    <div class="modal-body">
        <form>      
            <!-- generic error message -->
            <ngb-alert type="danger" *ngIf="errorMessages && errorMessages['generic']" [dismissible]="false">
                <div *ngFor="let errorMessage of errorMessages['generic']">{{ errorMessage | translate }}</div>
            </ngb-alert>

            <div class="form-group">
                <div class="row">
                    <div class="input-group">
                        <label class="col-md-3"><b>{{ 'calendar.startDate' | translate }}:</b></label>
                        <label class="col">{{ model.startDate | date: 'fullDate'}} {{ model.startDate | date: 'shortTime'}}</label>
                    </div>
                    <ngb-alert type="danger" *ngIf="errorMessages && errorMessages['StartDate']" [dismissible]="false">
                        <div *ngFor="let errorMessage of errorMessages['StartDate']">{{ errorMessage | translate }}</div>
                    </ngb-alert>
                </div>
                <div class="row">
                    <div class="input-group">
                        <label class="col-md-3"><b>{{ 'calendar.endDate' | translate }}:</b></label>
                        <label class="col">{{ model.endDate | date: 'fullDate'}} {{ model.endDate | date: 'shortTime'}}</label>
                    </div>
                    <ngb-alert type="danger" *ngIf="errorMessages && errorMessages['EndDate']" [dismissible]="false">
                        <div *ngFor="let errorMessage of errorMessages['EndDate']">{{ errorMessage | translate }}</div>
                    </ngb-alert>
                </div>
                <div class="row">
                    <div class="input-group">
                        <div class="col">
                            <label hidden="true"><b>{{ 'calendar.notes' | translate }}:</b></label>
                            <textarea placeholder="{{ 'calendar.notes' | translate}}" class="w-100 h-100" name="notes" [(ngModel)]="model.notes" #notes="ngModel"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="cancelEvent()"  *ngIf="model.id">{{ 'calendar.buttons.cancel.event' | translate }}</button>
        <button type="button" class="btn btn-primary" (click)="saveEvent()">{{ 'button.save' | translate }}</button>
        <button type="button" class="btn btn-primary" (click)="c('Close click')">{{ 'button.close' | translate }}</button>
    </div>
</ng-template>
